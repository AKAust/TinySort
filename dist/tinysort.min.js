'use strict';(function(a,b){'function'==typeof define&&define.amd?define('tinysort',function(){return b}):a.tinysort=b})(window||module||{},function(a){function c(a,b){for(var c=a.length,d=c,e=void 0;d--;)e=c-d-1,b(a[e],e)}function b(a,b,c){for(var d in b)(c||a[d]===e)&&(a[d]=b[d]);return a}function d(a,b,c){l.push({prepare:a,sort:b,sortBy:c})}var e=a,f=null,g=window,h=g.document,i=parseFloat,j=/(-?\d+\.?\d*)\s*$/g,k=/(\d+\.?\d*)\s*$/g,l=[],m=function(a){return String.fromCharCode(a)},n=function(a){return Array.from([,,,],function(b,c){return m(a+c)})},o=n(0),p=n(4095),q={selector:f,order:'asc',attr:f,data:f,useVal:!1,place:'org',returns:!1,cases:!1,natural:!1,forceStrings:!1,ignoreDashes:!1,sortFunction:f,useFlex:!1,emptyEnd:!1,console:console},r=0,s=0;return g.Element&&function(a){return a.matches=a.matches||a.msMatchesSelector}(Element.prototype),b(d,{loop:c}),b(function(a,d){function g(a){var c=!!a.selector,d=c&&':'===a.selector[0],e=b(a||{},q);I.push(b({hasSelector:c,hasAttr:e.attr!==f&&''!==e.attr,hasData:e.data!==f,hasFilter:d,sortReturnNumber:'asc'===e.order?1:-1},e))}function m(){c(a,function(a,b){J?J!==a.parentNode&&(K=!1):J=a.parentNode;var c=I[0],d=c.hasFilter,e=c.selector,f=!e||d&&a.matches(e)||e&&a.querySelector(e),g=f?F:G,h={elm:a,pos:b,posn:g.length};E.push(h),g.push(h)}),H.splice.apply(H,[0,Number.MAX_SAFE_INTEGER].concat(F))}function n(e,a,b){for(var f=b(e.toString()),g=b(a.toString()),h=0;f[h]&&g[h];h++)if(f[h]!==g[h]){var i=+f[h],c=+g[h];return i==f[h]&&c==g[h]?i-c:f[h]>g[h]?1:-1}return f.length-g.length}function t(a){for(var b,c=[],d=0,e=-1,f=0,g=void 0,h=void 0;g=(h=a.charAt(d++)).charCodeAt(0);)b=46===g||48<=g&&57>=g,b!==f&&(c[++e]='',f=b),c[e]+=h;return c}function u(d,a){var b=0;0!==s&&(s=0);for(var f=function(){var f=I[s],g=f.ignoreDashes?k:j;c(l,function(a){return a.prepare&&a.prepare(f)});var h=!1,m=z(d,f),o=z(a,f);if(f.sortFunction)b=f.sortFunction(d,a);else if('rand'===f.order)b=.5>Math.random()?1:-1;else{var p=''===m||m===e,q=''===o||o===e;if((p||q)&&alert('noAB',p,q),m===o)b=0;else{if(!f.forceStrings){var r=!!A(m)&&m&&m.match(g),u=!!A(o)&&o&&o.match(g);if(r&&u){var v=m.substr(0,m.length-r[0].length),w=o.substr(0,o.length-u[0].length);v==w&&(h=!0,m=i(r[0]),o=i(u[0]))}}b=f.natural&&(isNaN(m)||isNaN(o))?n(m,o,t):m<o?-1:m>o?1:0}}c(l,function(a){var c=a.sort;return c&&(b=c(f,h,m,o,b))}),b*=f.sortReturnNumber,0===b&&s++};0===b&&s<r;)f();return 0===b&&(b=d.pos>a.pos?1:-1),b}function v(){var a=F.length===E.length,b=I[0],c=b.place,d=b.console;if(K&&a)N?F.forEach(function(a,b){return a.elm.style.order=b}):J?J.appendChild(w()):d&&d.warn&&d.warn('parentNode has been removed');else{var e='start'===c,f='end'===c,g='first'===c;if('org'===c)F.forEach(x),F.forEach(function(a,b){return y(H[b],a.elm)});else if(e||f){var h=H[e?0:H.length-1],i=h&&h.elm.parentNode,j=i&&(e&&i.firstChild||i.lastChild);j&&(j!==h.elm&&(h={elm:j}),x(h),f&&i.appendChild(h.ghost),y(h,w()))}else if(g||'last'===c){var k=H[g?0:H.length-1];y(x(k),w())}}}function w(){return F.forEach(function(a){return D.appendChild(a.elm)}),D}function x(a){var b=a.elm,c=h.createElement('div');return a.ghost=c,b.parentNode.insertBefore(c,b),a}function y(a,b){var c=a.ghost,d=c.parentNode;d.insertBefore(b,c),d.removeChild(c),delete a.ghost}function z(a,b){var c,d=a.elm,g=b.selector;g&&(b.hasFilter?!d.matches(g)&&(d=f):d=d.querySelector(g)),b.hasAttr?c=d.getAttribute(b.attr):b.useVal?c=d.value||d.getAttribute('value'):b.hasData?c=d.getAttribute('data-'+b.data):d&&(c=d.textContent),A(c)&&(!b.cases&&(c=c.toLowerCase()),c=c.replace(/\s+/g,' '));var h=[e,f,''].indexOf(c);return-1!==h&&(c=(b.emptyEnd?p:o)[h]),c}function A(a){return'string'==typeof a}A(a)&&(a=h.querySelectorAll(a));var B=Object.assign({},q,d||{}),C=B.console;0===a.length&&C&&C.warn&&C.warn('No elements to sort');var D=h.createDocumentFragment(),E=[],F=[],G=[],H=[],I=[],J=void 0,K=!0,L=a.length&&a[0].parentNode,M=L.rootNode!==document,N=a.length&&(d===e||!1!==d.useFlex)&&!M&&-1!==getComputedStyle(L,null).display.indexOf('flex');return function(){0===arguments.length?g({}):c(arguments,function(a){return g(A(a)?{selector:a}:a)}),r=I.length}.apply(f,Array.prototype.slice.call(arguments,1)),m(),F.sort(d&&d.sortFunction||u),v(),F.map(function(a){return a.elm})},{plugin:d,defaults:q})}());
