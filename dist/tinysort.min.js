(function(e,f){'function'==typeof define&&define.amd?define('tinysort',()=>f):e.tinysort=f})(window||module||{},((e)=>{function g(G,H){const I=G.length;for(let K,J=I;J--;)K=I-J-1,H(G[K],K)}function h(G,H,I){for(let J in H)(I||G[J]===q)&&(G[J]=H[J]);return G}function k(G,H,I){B.push({prepare:G,sort:H,sortBy:I})}const p=!1,q=e,r=null,u=window,v=u.document,w=parseFloat,z=/(-?\d+\.?\d*)\s*$/g,A=/(\d+\.?\d*)\s*$/g,B=[],D={selector:r,order:'asc',attr:r,data:r,useVal:p,place:'org',returns:p,cases:p,natural:p,forceStrings:p,ignoreDashes:p,sortFunction:r,useFlex:p,emptyEnd:p,console};let E=0,F=0;return u.Element&&((G)=>G.matches=G.matches||G.msMatchesSelector)(Element.prototype),h(k,{loop:g}),h(function(G,H){function J(fa){const ga=!!fa.selector,ha=ga&&':'===fa.selector[0],ia=h(fa||{},D);$.push(h({hasSelector:ga,hasAttr:ia.attr!==r&&''!==ia.attr,hasData:ia.data!==r,hasFilter:ha,sortReturnNumber:'asc'===ia.order?1:-1},ia))}function L(fa,ga,ha){const ia=ha(fa.toString()),ja=ha(ga.toString());for(let ka=0;ia[ka]&&ja[ka];ka++)if(ia[ka]!==ja[ka]){const la=+ia[ka],ma=+ja[ka];return la==ia[ka]&&ma==ja[ka]?la-ma:ia[ka]>ja[ka]?1:-1}return ia.length-ja.length}function M(fa){const ga=[];for(let ka,la,ha=0,ia=-1,ja=0;ka=(la=fa.charAt(ha++)).charCodeAt(0);){const ma=46===ka||48<=ka&&57>=ka;ma!==ja&&(ga[++ia]='',ja=ma),ga[ia]+=la}return ga}function P(){return X.forEach((fa)=>V.appendChild(fa.elm)),V}function Q(fa){const ga=fa.elm,ha=v.createElement('div');return fa.ghost=ha,ga.parentNode.insertBefore(ha,ga),fa}function R(fa,ga){const ha=fa.ghost,ia=ha.parentNode;ia.insertBefore(ga,ha),ia.removeChild(ha),delete fa.ghost}function S(fa,ga){let ha,ia=fa.elm,{selector:ja}=ga;return ja&&(ga.hasFilter?!ia.matches(ja)&&(ia=r):ia=ia.querySelector(ja)),ga.hasAttr?ha=ia.getAttribute(ga.attr):ga.useVal?ha=ia.value||ia.getAttribute('value'):ga.hasData?ha=ia.getAttribute('data-'+ga.data):ia&&(ha=ia.textContent),T(ha)&&(!ga.cases&&(ha=ha.toLowerCase()),ha=ha.replace(/\s+/g,' ')),null===ha&&(ha='\u0FFF'),ha}function T(fa){return'string'==typeof fa}T(G)&&(G=v.querySelectorAll(G));const{console:U}=Object.assign({},D,H||{});0===G.length&&U&&U.warn&&U.warn('No elements to sort');const V=v.createDocumentFragment(),W=[],X=[],Y=[],Z=[],$=[];let _,ba=!0,ca=G.length&&G[0].parentNode,da=ca.rootNode!==document,ea=G.length&&(H===q||!1!==H.useFlex)&&!da&&-1!==getComputedStyle(ca,null).display.indexOf('flex');return function(){0===arguments.length?J({}):g(arguments,(fa)=>J(T(fa)?{selector:fa}:fa)),E=$.length}.apply(r,Array.prototype.slice.call(arguments,1)),function(){g(G,(fa,ga)=>{_?_!==fa.parentNode&&(ba=!1):_=fa.parentNode;const{hasFilter:ha,selector:ia}=$[0],ja=!ia||ha&&fa.matches(ia)||ia&&fa.querySelector(ia),ka=ja?X:Y,la={elm:fa,pos:ga,posn:ka.length};W.push(la),ka.push(la)}),Z.splice(0,Number.MAX_SAFE_INTEGER,...X)}(),X.sort(function(fa,ga){let ha=0;for(0!=F&&(F=0);0==ha&&F<E;){const ia=$[F],ja=ia.ignoreDashes?A:z;g(B,(na)=>na.prepare&&na.prepare(ia));let ka=p,la=S(fa,ia),ma=S(ga,ia);if(ia.sortFunction)ha=ia.sortFunction(fa,ga);else if('rand'===ia.order)ha=0.5>Math.random()?1:-1;else{const na=''===la||la===q,oa=''===ma||ma===q;if(la===ma)ha=0;else if(ia.emptyEnd&&(na||oa))ha=na&&oa?0:na?1:-1;else{if(!ia.forceStrings){let pa=!!T(la)&&la&&la.match(ja),qa=!!T(ma)&&ma&&ma.match(ja);if(pa&&qa){const ra=la.substr(0,la.length-pa[0].length),sa=ma.substr(0,ma.length-qa[0].length);ra==sa&&(ka=!p,la=w(pa[0]),ma=w(qa[0]))}}ha=la===q||ma===q?0:ia.natural&&(isNaN(la)||isNaN(ma))?L(la,ma,M):la<ma?-1:la>ma?1:0}}g(B,({sort:na})=>na&&(ha=na(ia,ka,la,ma,ha))),ha*=ia.sortReturnNumber,0===ha&&F++}return 0===ha&&(ha=fa.pos>ga.pos?1:-1),ha}),function(){const fa=X.length===W.length,{place:ga,console:ha}=$[0];if(ba&&fa)ea?X.forEach((ia,ja)=>ia.elm.style.order=ja):_?_.appendChild(P()):ha&&ha.warn&&ha.warn('parentNode has been removed');else{const ja='start'===ga,ka='end'===ga,la='first'===ga;if('org'===ga)X.forEach(Q),X.forEach((na,oa)=>R(Z[oa],na.elm));else if(ja||ka){let na=Z[ja?0:Z.length-1],oa=na&&na.elm.parentNode,pa=oa&&(ja&&oa.firstChild||oa.lastChild);pa&&(pa!==na.elm&&(na={elm:pa}),Q(na),ka&&oa.appendChild(na.ghost),R(na,P()))}else if(la||'last'===ga){const na=Z[la?0:Z.length-1];R(Q(na),P())}}}(),X.map((fa)=>fa.elm)},{plugin:k,defaults:D})})());
